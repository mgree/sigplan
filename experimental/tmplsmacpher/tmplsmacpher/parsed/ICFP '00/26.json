{"article_publication_date": "09-01-2000", "fulltext": "\n eha bea aon esk,lazeve eshooon ea,buo,weo is has esk has     alsodevelopedanotionoforderingbetweenbothobservables \nandontrats,1:2,pronouned\"1dominates2\". Roughlyspeaking,1:2ifitisatalltimespreferableto aquire1thantoaquire2;thatis,H(1):H(2)and \nVt:H(2)[ 1]](t):[ 2]](t) Equalities,suhastheonesgivenabove,anbeusedasop\u00adtimisingtransformationsinavaluationengine.A\"ontrat \nompiler\"anusetheseidentitiestotransformaontrat, expressedintheintermediatelanguageofvalueproesses (seetheintrodutiontoSetion4),intoaformthatanbe \nvaluedmoreheaply. ..7Summary Thisompletesourdesriptionoftheabstratevaluation semantis.Fromaprogramming\u00adlanguagepointofview, \neverythingisquiteroutine,inludingourproofs.Butwe stressthatitismostunusualtofndformalproofsinthe fnaneindustryatthislevelofabstration.Wehavenamed \nandtamedtheompliatedprimitives(dis,exh,et):the lawstheymustsatisfygiveusawaytoproveidentitiesabout ontratswithouthavingtounderstandmuhaboutrandom \nvariables.Themathematialdetailsarearane,believeus! 5Implementation Ourevaluationsemantisisnotonlyanabstratbeast.We \nanalsoregardFigures4and5asatranslationfromour ontratlanguageintoalower\u00adlevellanguageofproesses, whoseombinatorsaretheprimitivesofFigure6.Thenwe \nanoptimisetheproess\u00adleveldesription,using(A1)\u00ad(A5). Finally,all(ha!)weneedtodoistoimplementtheproess\u00adlevelprimitives,andwewillbeabletovalueanarbitrary \nontrat. Thekeydeisionis,ofourse,howweimplementavalue proess.Avalueproesshastorepresentunertaintyabout \nthefutureinanexpliitway.Therearenumerouswaysto modelthisunertainty.Forthesakeofonreteness,we willsimplypiktheHoandLeemodel,andusealattie \nmethodtoevaluateontratswithit[HoandLee,19S6]. Wehoosethismodelandnumerialmethodfortheirteh\u00adnialsimpliityandhistorialimportane,butmuhofthis \nsetionisalsoappliabletoothermodels(e.g.BlakDerman Toy).Changingthenumerialmethod(e.g.toMonteCarlo) wouldentailbiggerhanges,butnothinginourlanguageor \nitssemantis(Setions1-4)wouldbeafeted.Indeed,it isentirelypossibletousediferentnumerialmethodsfor diferentpartsofasingleontrat. \n5.1Aninterestratemodel InthetypialHoandLeenumerialsheme,theinterest rateevolutionisrepresentedbyalattie(or\"reombining \ntree\"),asdepitedinFigureS.Eaholumnofthetree representsadisretetimestep,andtimeinreasesfromleft toright.Timezerorepresents\"now\".Asusualwithdisrete \nmodels,thereisanissueofhowlongatimestepwillbe;we won'tdisussthatfurtherhere,butwenoteinpassingthat thetimestepsneednotbeofuniformsize. \n 5% Time step 01 23 FigureS:Ashortterminterestrateevolution Ateahnodeofthetreeisassoiatedaoneperiodshort \nterminterestrate,shortlydenominatedtheinterestrate fromnowon.Weknowtoday'sinterestrate,sothefrst olumninthetreehasjustoneelement.However,there \nissomeunertaintyofwhatinterestrateswillevolvetoby theendofthefrsttimestep.Thisisexpressedbyhaving twointerest\u00adratevaluesintheseondolumn;theideais \nthattheinterestratewillevolvetooneofthesetwoval\u00adueswithequalprobability.Inthethirdtimestep,therates splitagain,butthedown/uppathjoinstheup/downpath, \nsothereareonlythreeratesinthethirdolumn,notfour. Thisiswhythestrutureisalledalattie;itmakesthe wholeshemeomputationallyfeasiblebygivingonlyalin\u00adeargrowthinthewidthofthetreewithtime.Ofourse,the \ntreeisonlyadisreteapproximationofaontinuousproess; itsreombiningnatureisjustahoiefore\u00c6ienyreasons. WewriteRLforthevetorofratesintime\u00adstept,andRL,i \nforthei'thmemberofthatvetor,startingwith0atthe bottom.Thus,forexample,R2,1=5%.Theatualnumbers inFigureSareunrealistiallyregular:inmoreelaborated \ninterestratemodels,theywillnotbeevenlyspaedbutonly monotoniallydistributedineaholumn. 5.2Valueproesses \nSomuhfortheinterestratemodel.Avalueproessis modeledbyalattieofexatlythesameshapeastheinterest rateevolution,exeptthatwehaveavalueateahnode \ninsteadofaninterestrate.Figure9showsthevalueproess treeforourfavouritezero\u00adouponbond 7=get(saleK10(trunatet(oneGBP))) \nevaluatedinpoundssterling(GBP).Usingourevaluationse\u00admantiswehave t GBP[ 7]]=disGBP(K(10)(t)) IntheFigure,weassumethatthetimetistimestep3.At \nstep3,therefore,thevalueoftheontratisertainly10 10 8.64 Time step 01 23 Figure9:AHoandLeevaluationlattie \natallnodes,beauseunonditionallydelivers\u00a310atthat timerememberaxiom(A3).Attimestep2,however, wemustdisountthe\u00a310bytheinterestrateappropriate \ntothattimestep.Weomputethevalueateahnodeof time\u00adstep2byaveragingthetwovaluesinitssuessors, andthendisountingtheaveragevaluebakonetimestep \nusingtheinterestrateassoiatedtothatnode8.Usingthe samenotationforthevaluetreeVasweusedfortherate modelR,wegettheequation: \nVL+1,iVL+1,i+1VL,i= 2(1RL,i!t) where!tisthesizeofthetimestep.Usingthisequation weanfllintherestofthevaluesinthetree,aswehave \ndoneinFigure9.Thevalueintimestep0istheurrent valueoftheontrat,inpoundssterling.i.e\u00a3S64. Inshort,alattieimplementationworksasfollows: \n Avalueproessisrepresentedbyalattie,inwhih eaholumnisadisreterepresentationofarandom variable.Thevalueineahnodeisoneofthepossible \nvaluesthevariableantake,andinourverysimple settingthenumberofpathsfromtheroottothenode isproportionaltotheprobabilitythatthevariablewill \ntakethatvalue.Wewillsayabitmoreabouthowto representsuhatreeinthenextsubsetion.  Thegenerioperations,inthetophalfofFigure6, \nareeasytoimplement.K(x)isavalueproessthatis everywhereequaltox.time(t)isaproessinwhih thevaluesinapartiularolumnareallequaltothe \nnumberofdaysbetweenthatolumn'stimeandt. lit(,p)appliestoppoint\u00adwise;lit2(,p1,p2)\"zips together\"p1andp2,ombiningorrespondingvalues \npoint\u00adwisewith.  8 Forevidentpresentationreasons,wedon'tareaboutthefat thattheHoandLeemodelismemberofalassofmodelsthatadmit \ninfatalosed-formsol\"tionforzero-ouponbonds. Themodel\u00adspeifoperationsofFigure6areabit harder.Wehavedesribedhowtoimplementdis, \nwhihusestheinterestratemodel.exhisatually rathereasier(multiplythevalueproesspoint\u00adwiseby aproessrepresentingtheexhange\u00adrate).Thesnell \nprimitivetakesabitmorework,andwedonotde\u00adsribeitindetailhere.Roughlyspeaking,apossible implementationmaybe:takethefnalolumnofthe \ntree,disountitbakonetimestep,takethemaximum ofthatolumnwiththeorrespondingolumnofthe originaltree,andthenrepeatthatproessalltheway \nbaktotheroot. Theremaininghigh\u00adlevelquestionis:inthe(big)setof possibleinterestratemodels,whatisa\"good\"model?The \nanswerisratherinestuous.Aandidateinterestratemodel shouldprieorretlythoseontratsthatarewidelytraded: \noneansimplylookuptheurrentmarketpriesforthem, andomparethemwiththealulatedresults.Sowelook forandlateradjusttheinterestratemodeluntilitftsthe \nmarketdataforthesesimpleontrats.Nowwearereadyto usethemodeltoomputepriesformoreexotiontrats. Theentiremarketisagigantifeedbaksystem,andative \nresearhstudiestheproblemofitsstability. 5.3ImplementationinHaskell Wehavetwopartialimplementationsof(earlierversionsof) \ntheseideas,oneofwhihisimplementedasaHaskellom\u00adbinatorlibrary.ThetypeContratisimplementedasan algebraidatatype,withoneonstrutorforeahprimitive \nombinator: dataContrat=OneDateCurreny GiveContrat ... Thetranslationtoproessesisdonebyastraightforward \nreursiveHaskellimplementationof.[[]]: eval::Model->Curreny->Contrat->ValPro Here,Modelontainstheinterestrateevolutions,exhange \nrateevolutions,andwhateverother\"underlyings\"arene\u00adessarytoevaluatetheontrat. Ourfrstimplementationusedthefollowingrepresentation \nforavalueproess: typeValPro=(TimeStep,[Slie]) typeSlie=[Double] Avalueproessisrepresentedbyapairof(a)theproess's \nhorizon,and(b)alistofslies(orolumns),onepertime stepinreversetimeorder.Thefrstslieisatthehorizon oftheproess,thenextslieisonetimestepearlier,andso \non.Sinethe(fundamental)disountreurreneequation (Setion5.1)worksbakwardsintime,itisonvenientto representthelistthiswayround.Eahslieisoneelement \nshorterthantheonebefore. Lazinessplaysaveryimportantrole,fortworeasons: Proesstreesanbeomeverylarge,sinetheirsizeis \nquadratiinthenumberoftimestepstheyover.A omplexontratwillberepresentedbyombiningto\u00adgethermanyvaluetrees;itwouldbeVeryBadtofully \n11  \n\t\t\t", "proc_id": "351240", "abstract": "Financial and insurance contracts do not sound like promising territory for functional programming and formal semantics, but in fact we have discovered that insights from programming languages bear directly on the complex subject of describing and valuing a large class of contracts.We introduce a combinator library that allows us to describe such contracts precisely, and a compositional denotational semantics that says what such contracts are worth. We sketch an implementation of our combinator library in Haskell. Interestingly, lazy evaluation plays a crucial role.", "authors": [{"name": "Simon Peyton Jones", "author_profile_id": "81100271851", "affiliation": "Microsoft Research, Cambridge", "person_id": "PP40033275", "email_address": "", "orcid_id": ""}, {"name": "Jean-Marc Eber", "author_profile_id": "81332497233", "affiliation": "LexiFi Technologies, Paris", "person_id": "P136713", "email_address": "", "orcid_id": ""}, {"name": "Julian Seward", "author_profile_id": "81100309951", "affiliation": "University of Glasgow", "person_id": "PP33034273", "email_address": "", "orcid_id": ""}], "doi_number": "10.1145/351240.351267", "year": "2000", "article_id": "351267", "conference": "ICFP", "title": "Composing contracts: an adventure in financial engineering (functional pearl)", "url": "http://dl.acm.org/citation.cfm?id=351267"}